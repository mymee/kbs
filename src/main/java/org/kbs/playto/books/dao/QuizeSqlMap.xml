<?xml version="1.0" encoding="UTF-8" ?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="QuizeInfo">

    <select id="selectQuizeInfo" parameterType="valueObject" resultType="valueObject">
        select * from QUIZE_INFO WHERE NUM = #{quizeNum}
    </select>

    <update id="updateQuizeStart" parameterType="valueObject">
        UPDATE QUIZE_INFO SET PROCESS_YN = 1, BEGIN_DT = NOW() WHERE NUM = #{quizeNum}
    </update>

    <update id="updateQuizeEnd" parameterType="valueObject">
        UPDATE QUIZE_INFO SET PROCESS_YN = 0, END_DT = NOW() WHERE NUM = #{quizeNum}
    </update>

    <update id="updateQuizePriority" parameterType="valueObject">
        UPDATE QUIZE_INFO SET PRIORITY_TEAM_SEQ = #{teamSeq}, PRIORITY_YN = #{priorityYN} WHERE NUM = #{quizeNum}
    </update>

    <update id="updateQuizeDouble" parameterType="valueObject">
        UPDATE QUIZE_INFO SET DOUBLE_TEAM_SEQ = #{teamSeq}, DOUBLE_YN = #{doubleYN} WHERE NUM = #{quizeNum}
    </update>

    <insert id="insertQuizeAnswer" parameterType="valueObject">
        INSERT INTO QUIZE_SCORE
        (
          TEAM_SEQ
          ,QUIZE_NUM
          ,QUIZE_ANSWER
          ,SCORE
          ,CHANCE_1
          ,CHANCE_2
          ,CHANCE_3
          ,CHANCE_4
          ,CHANCE_5
          ,CHANCE_6
          ,QUIZE_DT
        )
        VALUES
        (
          #{teamSeq}
          ,#{quizeNum}
          ,#{quizeAnswer}
          ,(SELECT SCORE FROM QUIZE_INFO WHERE NUM = #{quizeNum} AND ANSWER = #{quizeAnswer})
          ,#{quizeChance1}
          ,#{quizeChance2}
          ,#{quizeChance3}
          ,#{quizeChance4}
          ,#{quizeChance5}
          ,#{quizeChance6}
          ,now()
        )
    </insert>
</mapper>